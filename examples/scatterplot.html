<html>

<head>
	<title>Visualizations: scatterplot</title>
	<link href="example.css" rel="stylesheet">
	<link href="chart.css" rel="stylesheet">
</head>

<body>
	<h1>Scatterplot Example</h1>
	<div>This plot shows a simple scatterplot</div>
	<div style="width:50%" id="plot">
	</div>
	<hr/>
	<div>Data:</div>
	<textarea id="chartData" style="width:600px; height:400px">
[
	{
	 "name": "root",
	 "values": [
	  {
	   "name": "Inpatient Visit",
	   "num_persons": 9477394,
	   "id": 9201,
	   "path": "Inpatient Visit",
	   "pct_persons": 0.122430889363687,
	   "records_per_person": 1.72303377911692
	  },
	  {
	   "name": "Outpatient Visit",
	   "num_persons": 56980498,
	   "id": 9202,
	   "path": "Outpatient Visit",
	   "pct_persons": 0.736085578643856,
	   "records_per_person": 33.0220930150523
	  },
	  {
	   "name": "Emergency Room Visit",
	   "num_persons": 24110013,
	   "id": 9203,
	   "path": "Emergency Room Visit",
	   "pct_persons": 0.311458016218389,
	   "records_per_person": 4.28116890687699
	  },
	  {
	   "name": "Long Term Care Visit",
	   "num_persons": 467015,
	   "id": 42898160,
	   "path": "Long Term Care Visit",
	   "pct_persons": 0.00603299406948602,
	   "records_per_person": 2.37032215239339
	  }
	 ]
	},
	{
	 "name": "root 2",
	 "values": [
		  {
		   "name": "Inpatient Visit",
		   "num_persons": 9477394,
		   "id": 9201,
		   "path": "Inpatient Visit",
		   "records_per_person": 0.122430889363687
		  },
		  {
		   "name": "Outpatient Visit",
		   "num_persons": 56980498,
		   "id": 9202,
		   "path": "Outpatient Visit",
		   "records_per_person": 0.736085578643856
		  },
		  {
		   "name": "Emergency Room Visit",
		   "num_persons": 24110013,
		   "id": 9203,
		   "path": "Emergency Room Visit",
		   "records_per_person": 0.311458016218389
		  },
		  {
		   "name": "Long Term Care Visit",
		   "num_persons": 467015,
		   "id": 42898160,
		   "path": "Long Term Care Visit",
		   "records_per_person": 0.00603299406948602
		  }
	  ]
	}
]
	
	</textarea>
	<button id="reload">Reload</button>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.3/require.min.js"></script>
	<script src="../build/config.js"></script>
	<script>
		requirejs(['atlascharts/scatterplot'], function(scatterplot) {
			var cartData;
			var plot = new scatterplot();
			var target = document.querySelector('#plot');
			
			function refreshPlot() {
				chartData = JSON.parse(document.querySelector("#chartData").value);
				plot.render(chartData, target, 400, 275, {
					xValue: 'records_per_person',
					yValue: 'num_persons',
					colors: {
				   "root": "#00f",
				   "root 2": "#f00",
				  }
				});
			}
			
			document.querySelector("#reload").addEventListener("click", function() {
				refreshPlot();	
			});
			
			refreshPlot();
			
		});
	</script>
</body>
</html>